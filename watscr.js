'use strict';(function(f,g){"function"===typeof define&&define.amd?define(["xmlhttprequest","buffer"],g):"object"===typeof exports?module.exports=g(require("xmlhttprequest").XMLHttpRequest,require("buffer").Buffer):f.wayscript=g(f.XMLHttpRequest,f.Buffer)})("undefined"!==typeof global?global:this.window||this.global,function(f,g){const e={apiKey:"",username:"",password:"",run:function(c,d="",h=null,l=null){let b="";d=encodeURIComponent(d||"");if(h)for(let [a,k]of Object.entries(h))b+=0<b.length?"&":
"?",b+=encodeURIComponent(a)+"="+encodeURIComponent(k);return m(c,d,b,l)}},m=function(c,d,h,l){let b=new f;c="https://"+c+".wayscript.io/"+d+h;b.open("POST",c);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-WayScript-Api","javascript");(d=n())&&b.setRequestHeader("Authorization",d);const a={};a.requestUrl=c;a.authorizationHeader=d;a.requestParams=h;a.requestBody=l;a.onSuccess=function(k){a._onSuccess=k;return a};a.onError=function(k){a._onError=k;return a};b.onreadystatechange=
function(){4===b.readyState&&(200===b.status?a._onSuccess&&a._onSuccess(b.responseText):a._onError&&a._onError(b.responseText))};b.send(JSON.stringify(l||{}));return a},n=function(){if(e.apiKey){if(43!==e.apiKey.length)throw Error("The API Key provided is not valid.");return"Bearer "+e.apiKey}if(e.username&&e.password){var c=e.username+":"+e.password;c="function"===typeof btoa?btoa(c):g.from(c).toString("base64");return"Basic "+c}return null};return e});
